CREATE TYPE "route_day" AS ENUM (
  'sin_ruta',
  'lunes',
  'martes',
  'miercoles',
  'jueves',
  'viernes',
  'sabado',
  'domingo'
);

CREATE TYPE "type_status" AS ENUM (
  'abonada',
  'pendiente',
  'pagada'
);

CREATE TABLE "users" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre" varchar(30) NOT NULL,
  "username" varchar(15),
  "dni" varchar(13) UNIQUE,
  "email" varchar(50) UNIQUE NOT NULL,
  "password" varchar NOT NULL
);

CREATE TABLE "clients" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre" varchar(60) NOT NULL,
  "direccion" varchar,
  "dni" varchar(13) UNIQUE,
  "id_sellers" int,
  "id_vehicle" int,
  "id_route" int
);

CREATE TABLE "route" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "dia" route_day DEFAULT 'sin_ruta',
  "detail" varchar(30) NOT NULL
);

CREATE TABLE "vehicles" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "placa" varchar(15),
  "chofer" varchar(30),
  "dni" varchar(13) UNIQUE,
  "isActive" boolean DEFAULT false,
  "id_route" int
);

CREATE TABLE "sellers" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "nombre" varchar(30) NOT NULL,
  "isActive" boolean DEFAULT false,
  "id_route" int
);

CREATE TABLE "bills" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "num_Fact" varchar(17) UNIQUE NOT NULL,
  "isWhite" boolean DEFAULT false,
  "status" type_status DEFAULT 'pendiente',
  "fecha_entrega" date,
  "total_fact" float NOT NULL,
  "saldo" float,
  "detalle_adt" varchar,
  "id_client" int NOT NULL,
  "id_sellers" int NOT NULL
);

CREATE TABLE "transaction" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "num_Fact" varchar(17) NOT NULL,
  "fecha_abono" date,
  "abono" float,
  "id_users" int,
  "id_bills" int,
  "id_client" int
);

CREATE TABLE "expense" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_tabla_liq" varchar UNIQUE,
  "alimentacion" float,
  "combustible" float,
  "vehiculo" float,
  "peaje" float,
  "total" float,
  "detalle_adt" varchar
);

CREATE TABLE "cash" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_tabla_liq" varchar UNIQUE,
  "monedas" float,
  "efectivo" float,
  "depositos" float,
  "cheque" float,
  "total" float,
  "detalle_adt" varchar NOT NULL
);

CREATE TABLE "bills_liquidation_veh" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_bills" int,
  "id_liquidation_veh" int
);

CREATE TABLE "bills_liquidation_sellers" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_bills" int NOT NULL,
  "id_liquidation_sellers" int NOT NULL
);

CREATE TABLE "products_returned" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY UNIQUE PRIMARY KEY,
  "id_tabla_liq" varchar UNIQUE,
  "mal_estado" float,
  "rechazados" float,
  "total" int,
  "detalle_adt" varchar NOT NULL
);

CREATE TABLE "liquidation_sellers" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_users" int NOT NULL,
  "id_sellers" int NOT NULL,
  "id_route" int,
  "fecha_liqui" date,
  "cod_liq" varchar UNIQUE,
  "total_fact_cob" float NOT NULL,
  "total_enviado" float NOT NULL,
  "total_cob" float NOT NULL,
  "total_no_cob" float NOT NULL,
  "total_recibido" float NOT NULL,
  "cuadre" float NOT NULL,
  "detalle_ad" varchar
);

CREATE TABLE "cuadre_sell" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_sellers" int,
  "total" float
);

CREATE TABLE "cuadre_veh" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_veh" int,
  "total" float
);

CREATE TABLE "liquidation_veh" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "id_users" int NOT NULL,
  "id_vehiculo" int NOT NULL,
  "id_route" int,
  "cod_liq" varchar UNIQUE,
  "fecha_liquidation" date,
  "total_fact_ent" float NOT NULL,
  "total_fact_cob" float NOT NULL,
  "total_enviado" float NOT NULL,
  "total_cob" float NOT NULL,
  "total_ent" float NOT NULL,
  "total_no_cob" float NOT NULL,
  "total_no_ent" float NOT NULL,
  "total_var" float NOT NULL,
  "total_recibido" float NOT NULL,
  "cuadre" float NOT NULL,
  "detalle_ad" varchar
);

ALTER TABLE "vehicles" ADD FOREIGN KEY ("id_route") REFERENCES "route" ("id");

ALTER TABLE "bills_liquidation_veh" ADD FOREIGN KEY ("id_bills") REFERENCES "bills" ("id");

ALTER TABLE "bills_liquidation_sellers" ADD FOREIGN KEY ("id_bills") REFERENCES "bills" ("id");

ALTER TABLE "sellers" ADD FOREIGN KEY ("id_route") REFERENCES "route" ("id");

ALTER TABLE "bills" ADD FOREIGN KEY ("id_client") REFERENCES "clients" ("id");

ALTER TABLE "clients" ADD FOREIGN KEY ("id_route") REFERENCES "route" ("id");

ALTER TABLE "clients" ADD FOREIGN KEY ("id_sellers") REFERENCES "sellers" ("id");

ALTER TABLE "bills" ADD FOREIGN KEY ("id_sellers") REFERENCES "sellers" ("id");

ALTER TABLE "transaction" ADD FOREIGN KEY ("id_users") REFERENCES "users" ("id");

ALTER TABLE "transaction" ADD FOREIGN KEY ("id_bills") REFERENCES "bills" ("id");

ALTER TABLE "transaction" ADD FOREIGN KEY ("id_client") REFERENCES "clients" ("id");

ALTER TABLE "bills_liquidation_veh" ADD FOREIGN KEY ("id_liquidation_veh") REFERENCES "liquidation_veh" ("id");

ALTER TABLE "liquidation_veh" ADD FOREIGN KEY ("id_users") REFERENCES "users" ("id");

ALTER TABLE "liquidation_veh" ADD FOREIGN KEY ("id_route") REFERENCES "route" ("id");

ALTER TABLE "liquidation_veh" ADD FOREIGN KEY ("id_vehiculo") REFERENCES "vehicles" ("id");

ALTER TABLE "products_returned" ADD FOREIGN KEY ("id_tabla_liq") REFERENCES "liquidation_veh" ("cod_liq");

ALTER TABLE "expense" ADD FOREIGN KEY ("id_tabla_liq") REFERENCES "liquidation_veh" ("cod_liq");

ALTER TABLE "cash" ADD FOREIGN KEY ("id_tabla_liq") REFERENCES "liquidation_veh" ("cod_liq");

ALTER TABLE "liquidation_sellers" ADD FOREIGN KEY ("id_users") REFERENCES "users" ("id");

ALTER TABLE "liquidation_sellers" ADD FOREIGN KEY ("id_sellers") REFERENCES "sellers" ("id");

ALTER TABLE "liquidation_sellers" ADD FOREIGN KEY ("id_route") REFERENCES "route" ("id");

ALTER TABLE "bills_liquidation_sellers" ADD FOREIGN KEY ("id_liquidation_sellers") REFERENCES "liquidation_sellers" ("id");

ALTER TABLE "cash" ADD FOREIGN KEY ("id_tabla_liq") REFERENCES "liquidation_sellers" ("cod_liq");

ALTER TABLE "expense" ADD FOREIGN KEY ("id_tabla_liq") REFERENCES "liquidation_sellers" ("cod_liq");

ALTER TABLE "cuadre_veh" ADD FOREIGN KEY ("id_veh") REFERENCES "vehicles" ("id");

ALTER TABLE "cuadre_sell" ADD FOREIGN KEY ("id_sellers") REFERENCES "sellers" ("id");

ALTER TABLE "clients" ADD FOREIGN KEY ("id_vehicle") REFERENCES "vehicles" ("id");
